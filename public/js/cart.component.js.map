{"version":3,"sources":["cart.component.ts"],"names":[],"mappings":"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","file":"cart.component.js","sourcesContent":["import {bootstrap} from '@angular/platform-browser-dynamic';\nimport {Component, OnInit} from '@angular/core';\nimport {HTTP_PROVIDERS} from '@angular/http';\nimport {RouteConfig, ROUTER_DIRECTIVES, ROUTER_PROVIDERS, RouteParams, Router} from '@angular/router-deprecated';\nimport {OrderService} from './order.service';\n\n\n@Component({\n    selector: 'cart',\n    templateUrl: './components/cart.component.html',\n    directives: [ROUTER_DIRECTIVES],\n    providers: [HTTP_PROVIDERS],\n    inputs: ['cart', 'totalPrice', 'tax', 'subtotal']\n})\n\nexport class CartComponent {\n    //array containing user relevant cart info\n    cart:any;\n\n    totalPrice:number;\n    tax:number;\n    subtotal:number;\n\n    //temporary storage for item objects for deleting/adding purposes in functions below\n    cartItem:any;\n    orderItem:any;\n\n    /**\n     * inject orderService and router, orderservice is public so data can be shared\n     * between views, instead of creating a new instance in each component that needs it\n     * @param orderService\n     * @param router\n     */\n    constructor(public orderService:OrderService, private router:Router) {\n    }\n\n    ngOnInit() {\n\n        //create cart instance from items in orderservice cart\n        this.cart = this.orderService.cart;\n\n        if (this.cart.length > 0) {\n            //get all item prices and reduce for total\n            this.totalPrice = this.orderService.itemPrices.reduce(function (total, num) {\n                return total + num\n            });\n            this.tax = this.orderService.calcTax(this.totalPrice);\n            this.subtotal = this.tax + this.totalPrice;\n        }\n\n    }\n\n    /**\n     * User clicks minus icon on cart item, calling this method which is fed the items\n     * array index. the item is spliced from the array at that index\n     * @param item\n     */\n    deleteItem(item) {\n        //delete objects related to user input\n        this.orderService.cart.splice(item, 1);\n        this.orderService.order.splice(item, 1);\n        this.orderService.itemPrices.splice(item, 1);\n        this.totalPrice = this.orderService.itemPrices.reduce(function (total, num) {\n            return total + num\n        });\n        this.tax = this.orderService.calcTax(this.totalPrice);\n        this.subtotal = this.tax + this.totalPrice;\n    }\n\n    /**\n     * User clicks plus icon in view, calling this method which is fed the items\n     * array index, item is copied temporarily and then push back into the order as a duplicate\n     * \n     * @param item\n     */\n    addItem(item) {\n        //grab and store objects concerning user input\n        this.cartItem = this.orderService.cart[item];\n        this.orderItem = this.orderService.order[item];\n        //create duplicate instances of objects and add to api/cart arrays\n        this.orderService.cart.push(this.cartItem);\n        this.orderService.order.push(this.orderItem);\n        //increase price accordingly\n        this.orderService.itemPrices.push(this.cartItem.total);\n        this.totalPrice = this.orderService.itemPrices.reduce(function (total, num) {\n            return total + num\n        });\n        //calculate tax and add to cart total, to form subtotal\n        this.tax = this.orderService.calcTax(this.totalPrice);\n        this.subtotal = this.tax + this.totalPrice;\n    }\n\n    /**\n     * check if type is number, for debugging purposes\n     * @param val\n     */\n    isNumber(val) {\n        return typeof val === 'number';\n    }\n\n\n}\n"],"sourceRoot":"/source/"}