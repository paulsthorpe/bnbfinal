{"version":3,"sources":["welcomeComponent.component.ts"],"names":[],"mappings":"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","file":"welcomeComponent.component.js","sourcesContent":["import {bootstrap} from '@angular/platform-browser-dynamic';\nimport {Component, OnInit} from '@angular/core';\nimport {CartComponent} from './cart.component';\nimport {OrderService} from './order.service';\nimport {RouteConfig, ROUTER_DIRECTIVES, ROUTER_PROVIDERS} from '@angular/router-deprecated';\nimport {HTTP_PROVIDERS} from '@angular/http';\nimport {RequestService} from './http.service';\nimport {ControlGroup, Control, Validators} from '@angular/common';\nimport {ValidatorService} from './validators.service';\n\n\n\n\n@Component({\n    selector: 'welcome',\n    templateUrl: './components/welcome.component.html',\n    directives: [ROUTER_DIRECTIVES, CartComponent],\n    providers: [ValidatorService],\n    inputs: ['orderService.order', 'pastOrdersClient']\n})\n\nexport class WelcomeComponent implements OnInit{\n\n  phone: Phone;\n\n  pastOrders = [];\n\n  pastOrdersClient = [];\n\n  addOns : AddOn;\n\n  apiItem: ConfigAPI;\n\n  cartItem: ConfigCART;\n\n  form = new ControlGroup({\n\n    phoneLookup: new Control('', Validators.compose([Validators.required,\n      this._validators.cannotContainSpace,\n      this._validators.cannotContainSpecialChars,\n      this._validators.phoneLength])),\n  });\n\n  constructor(private _httpService: RequestService,\n    public orderService : OrderService,\n    private _validators : ValidatorService){\n\n  }\n\n  ngOnInit(){\n  }\n\n\n  getOrders(){\n    this.phone = {\n      phone: this.form.value.phoneLookup\n    }\n\n    this._httpService.getOrders(this.phone)\n    .subscribe(data => this.orgData(data));\n\n    this._httpService.getOrdersClient(this.phone)\n    .subscribe(data => this.orgDataClient(data));\n\n  }\n\n  orgData(data){\n    let length = data.length;\n\n    for(var i = 0; i < length; i++ ){\n      let pastOrder = [];\n\n      let items = data[i].items.length;\n      let col = [];\n      for(var a = 0; a < items; a++ ){\n        let oItem = [];\n\n        let tops = data[i].items[a].additionals.length;\n        let toppings = [];\n        for(var b = 0; b < tops; b++ ){\n          toppings.push(data[i].items[a].additionals[b]);\n        }\n\n        oItem['item_id'] = data[i].items[a].item_id;\n        oItem['additionals'] = toppings;\n\n        col.push(oItem);\n      }\n\n      pastOrder['order_id'] = data[i].order_id;\n      pastOrder['items'] = col;\n\n\n\n      this.pastOrders.push(pastOrder);\n\n    }\n      // this.pastOrders = allOrders;\n\n\n      console.log(this.pastOrders);\n  }\n\n  orgDataClient(data){\n    let length = data.length;\n\n    for(var i = 0; i < length; i++ ){\n      let pastOrder = [];\n\n      let items = data[i].items.length;\n      let col = [];\n      for(var a = 0; a < items; a++ ){\n        let oItem = [];\n\n        let tops = data[i].items[a].additionals.length;\n        let toppings = [];\n        for(var b = 0; b < tops; b++ ){\n          toppings.push(data[i].items[a].additionals[b]);\n        }\n\n        oItem['item_id'] = data[i].items[a].item_id;\n        oItem['additionals'] = toppings;\n\n        col.push(oItem);\n      }\n\n      pastOrder['order_id'] = data[i].order_id;\n      pastOrder['items'] = col;\n\n\n\n      this.pastOrdersClient.push(pastOrder);\n\n    }\n      // this.pastOrders = allOrders;\n\n\n      // console.log(this.pastOrdersClient);\n  }\n\n  retrieveOrderState(orderIndex){\n    let total = this.pastOrders[orderIndex].items.length;\n\n    for(var itemIndex = 0; itemIndex < total; itemIndex++){\n        let index = itemIndex;\n        this._httpService.getSpecificAddOns(this.pastOrders[orderIndex].items[itemIndex].additionals)\n        .subscribe(data => this.applyOrder(data, orderIndex, index));\n    }\n\n  }\n\n  applyOrder(data, orderIndex, itemIndex){\n    let length = data.length;\n    this.orderService.apiAdditionals = [];\n\n    for(var i = 0; i < length; i++){\n\n      this.orderService.apiAdditionals.push(data[i].id);\n\n      this.orderService.cartAdditionals.push(data[i].name);\n      this.orderService.cartPrices.push(data[i].price);\n      this.orderService.total = this.orderService.cartPrices.reduce(function(total,num){return total+num});\n\n    }\n\n  this.apiItem = {\n    item_id: this.pastOrders[orderIndex].items[itemIndex].item_id,\n    additionals: this.orderService.apiAdditionals\n  }\n\n  this.cartItem = {\n    name : this.pastOrders[orderIndex].items[itemIndex].item_id,\n    additionals : this.orderService.cartAdditionals,\n    prices: this.orderService.cartPrices,\n    total: this.orderService.total,\n  };\n\n  this.orderService.addToOrder(this.apiItem);\n  this.orderService.addToCart(this.cartItem);\n  this.orderService.itemPrices.push(this.orderService.total)\n  console.log(this.orderService.order);\n}\n}\n\nexport interface Phone {\n  phone: string;\n}\n\nexport interface AddOn {\n  id: number,\n  name: string,\n  price: number\n}\n\nexport interface pastOrder {\n  order_id:number,\n  orderItem: pOrderItem[]\n}\n\nexport interface pOrderItem {\n  item_id: number,\n  additionals: number[]\n}\n\nexport interface ConfigAPI{\n  item_id: any,\n  additionals: any,\n}\n\nexport interface ConfigCART {\n  name: string,\n  additionals: any,\n  prices: any,\n  total: number,\n}\n\n//\n// orgData(data){\n//   let length = data.length;\n//   let allOrders = [];\n//\n//   for(var i = 0; i < length; i++ ){\n//\n//     this.pastOrder = data[i].order_id;\n//\n//     let items = data[i].items.length;\n//     let oItems = [];\n//     for(var a = 0; a < items; a++ ){\n//\n//       let tops = data[i].items[a].additionals.length;\n//       let toppings = [];\n//       for(var b = 0; b < tops; b++ ){\n//         toppings.push(data[i].items[a].additionals[b]);\n//       }\n//\n//       this.pItem = {\n//         item_id : data[i].items[a].item_id,\n//         additionals: toppings\n//       }\n//\n//       oItems.push(this.pItem);\n//\n//     }\n//     this.pastOrder = {\n//       order_id: data[i].order_id,\n//       orderItem: oItems\n//     }\n//     this.pastOrders.push(this.pastOrder);\n//   }\n//     // this.pastOrders = allOrders;\n//\n//\n//     console.log(this.pastOrders);\n// }\n//\n//\n//\n// }\n//\n// export interface Phone {\n// phone: string;\n// }\n//\n// export interface allPastOrders {\n// orders: pastOrder[]\n// }\n//\n// export interface pastOrder {\n// order_id:number,\n// orderItem: pOrderItem[]\n// }\n//\n// export interface pOrderItem {\n// item_id: number,\n// additionals: number[]\n// }\n"],"sourceRoot":"/source/"}