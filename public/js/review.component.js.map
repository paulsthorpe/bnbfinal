{"version":3,"sources":["review.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAoBA;gBAqBI,yBAAoB,YAA2B,EAAS,YAAyB,EAAU,MAAa;oBAApF,iBAAY,GAAZ,YAAY,CAAe;oBAAS,iBAAY,GAAZ,YAAY,CAAa;oBAAU,WAAM,GAAN,MAAM,CAAO;oBAfxG;;;uBAGG;oBACH,SAAI,GAAG,IAAI,qBAAY,CAAC;wBAEpB,IAAI,EAAE,IAAI,gBAAO,CAAC,EAAE,EAAE,mBAAU,CAAC,OAAO,CAAC,CAAC,mBAAU,CAAC,QAAQ;4BACzD,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;wBAErC,KAAK,EAAE,IAAI,gBAAO,CAAC,EAAE,EAAE,mBAAU,CAAC,OAAO,CAAC,CAAC,mBAAU,CAAC,QAAQ;4BAC1D,IAAI,CAAC,kBAAkB;4BACvB,IAAI,CAAC,yBAAyB;4BAC9B,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC;qBAC1B,CAAC,CAAC;gBAIH,CAAC;gBAED;;;;;mBAKG;gBACH,mCAAS,GAAT;oBAEI,IAAI,CAAC,QAAQ,GAAG;wBAEZ,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI;wBAC1B,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK;qBAE/B,CAAA;oBAED,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAE9C,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;yBAC9C,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAjB,CAAiB,CAAC,CAAC;oBAE1C,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAE3C,IAAI,CAAC,YAAY,CAAC,aAAa,GAAG,IAAI,CAAC;oBAEvC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;gBAEtC,CAAC;gBAED;;;;mBAIG;gBACH,4CAAkB,GAAlB,UAAmB,OAAe;oBAC9B,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBAClC,MAAM,CAAC,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,MAAM,CAAC,IAAI,CAAC;oBAChB,CAAC;gBACL,CAAC;gBAED;;;;mBAIG;gBACH,mDAAyB,GAAzB,UAA0B,OAAe;oBACrC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBAClC,MAAM,CAAC,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBACzC,MAAM,CAAC,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBACzC,MAAM,CAAC,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;wBACzC,MAAM,CAAC,EAAC,kBAAkB,EAAE,IAAI,EAAC,CAAC;oBACtC,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,MAAM,CAAC,IAAI,CAAC;oBAChB,CAAC;gBACL,CAAC;gBAED;;;;mBAIG;gBACH,qCAAW,GAAX,UAAY,OAAe;oBACvB,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC;wBAC7B,MAAM,CAAC,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC;oBAC/B,CAAC;oBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,CAAC;wBACnC,MAAM,CAAC,EAAC,WAAW,EAAE,IAAI,EAAC,CAAC;oBAC/B,CAAC;oBAAC,IAAI,CAAC,CAAC;wBACJ,MAAM,CAAC,IAAI,CAAC;oBAChB,CAAC;gBACL,CAAC;gBA3GL;oBAAC,gBAAS,CAAC;wBACP,QAAQ,EAAE,QAAQ;wBAClB,WAAW,EAAE,oCAAoC;wBACjD,UAAU,EAAE,CAAC,qCAAiB,EAAE,8BAAa,CAAC;wBAC9C,SAAS,EAAE,CAAC,6BAAc,EAAE,qBAAc,CAAC;wBAC3C,MAAM,EAAE,CAAC,UAAU,EAAE,SAAS,EAAE,MAAM,CAAC;qBAC1C,CAAC;;mCAAA;gBAwGF,sBAAC;YAAD,CArGA,AAqGC,IAAA;YArGD,6CAqGC,CAAA","file":"review.component.js","sourcesContent":["import {bootstrap} from '@angular/platform-browser-dynamic';\nimport {Component, OnInit} from '@angular/core';\nimport {CartComponent} from './cart.component';\nimport {OrderService} from './order.service';\nimport {ControlGroup, Control, Validators} from '@angular/common';\n\nimport {RouteConfig, ROUTER_DIRECTIVES, ROUTER_PROVIDERS, Router} from '@angular/router-deprecated';\nimport {RequestService} from './http.service';\nimport {HTTP_PROVIDERS} from '@angular/http';\n\n\n@Component({\n    selector: 'review',\n    templateUrl: './components/review.component.html',\n    directives: [ROUTER_DIRECTIVES, CartComponent],\n    providers: [RequestService, HTTP_PROVIDERS],\n    inputs: ['thePhone', 'theName', 'form']\n})\n\n\nexport class ReviewComponent {\n\n    theName:string;\n    thePhone:string;\n    custInfo:CustInfo;\n\n    /**\n     * form for user data input\n     * @type {ControlGroup}\n     */\n    form = new ControlGroup({\n\n        name: new Control('', Validators.compose([Validators.required,\n            this.cannotContainSpecialChars])),\n\n        phone: new Control('', Validators.compose([Validators.required,\n            this.cannotContainSpace,\n            this.cannotContainSpecialChars,\n            this.phoneLength])),\n    });\n\n    constructor(private _httpService:RequestService, public orderService:OrderService, private router:Router) {\n\n    }\n\n    /**\n     * get user info from form,push to api array\n     * send order to api, save customer info to display in confirm view\n     * set order conplete to true\n     * navigate to confirm view\n     */\n    sendOrder() {\n\n        this.custInfo = {\n\n            name: this.form.value.name,\n            phone: this.form.value.phone\n\n        }\n\n        this.orderService.addToOrder(this.form.value);\n\n        this._httpService.postJSON(this.orderService.order)\n            .subscribe(data => console.log(data));\n\n        this.orderService.storeCust(this.custInfo);\n\n        this.orderService.orderComplete = true;\n\n        this.router.navigate(['Confirm']);\n\n    }\n\n    /**\n     * validator to prevent space in input\n     * @param control\n     * @returns {any}\n     */\n    cannotContainSpace(control:Control) {\n        if (control.value.indexOf(' ') >= 0) {\n            return {cannotContainChars: true};\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * validator to prevent typical phone formats, we want just plain numbers\n     * @param control\n     * @returns {any}\n     */\n    cannotContainSpecialChars(control:Control) {\n        if (control.value.indexOf('/') >= 0) {\n            return {cannotContainChars: true};\n        } else if (control.value.indexOf('-') >= 0) {\n            return {cannotContainChars: true};\n        } else if (control.value.indexOf('(') >= 0) {\n            return {cannotContainChars: true};\n        } else if (control.value.indexOf(')') >= 0) {\n            return {cannotContainChars: true};\n        } else {\n            return null;\n        }\n    }\n\n    /**\n     * validator to ensure phone number is proper length\n     * @param control\n     * @returns {any}\n     */\n    phoneLength(control:Control) {\n        if (control.value.length >= 11) {\n            return {phoneLength: true};\n        } else if (control.value.length <= 9) {\n            return {phoneLength: true};\n        } else {\n            return null;\n        }\n    }\n\n\n}\n\n\n/**\n * interface for customer data, used in confirm view\n */\nexport interface CustInfo {\n    name:string,\n    phone:string\n}\n"],"sourceRoot":"/source/"}